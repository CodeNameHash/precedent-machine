*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#FAFAF8;--bg2:#fff;--bg3:#FAF8F5;--bg4:#F5F3EE;
  --border:#E8E6E1;--border2:#DDD;
  --text:#1a1a1a;--text2:#444;--text3:#888;--text4:#aaa;--text5:#ccc;
  --gold:#B8956A;--gold-light:#FAF6F0;--gold-border:rgba(184,149,106,0.25);
  --green:#2E7D32;--green-bg:#E8F5E9;--yellow:#F57F17;--yellow-bg:#FFF8E1;
  --red:#C62828;--red-bg:#FFEBEE;--blue:#1565C0;--blue-bg:#E3F2FD;
  --sans:'Source Sans 3',sans-serif;--serif:'Source Serif 4',serif;--mono:'JetBrains Mono',monospace;
}
body,#__next{font-family:var(--sans);background:var(--bg);color:var(--text);height:100vh;overflow:hidden}
::selection{background:rgba(184,149,106,0.2)}
::-webkit-scrollbar{width:5px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:#ddd;border-radius:3px}
button{font-family:var(--sans);cursor:pointer}input,textarea,select{font-family:var(--sans)}
textarea::placeholder,input::placeholder{color:#bbb}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes fadeIn{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}
.spinner{animation:spin 1s linear infinite}

#app{display:flex;flex-direction:column;height:100vh}
.header{padding:12px 28px;border-bottom:1px solid var(--border);background:var(--bg2);display:flex;align-items:center;justify-content:space-between;flex-shrink:0}
.search-section{padding:16px 28px;background:var(--bg2);border-bottom:1px solid var(--border);flex-shrink:0}
.main{flex:1;display:flex;overflow:hidden}
.sidebar{width:300px;border-right:1px solid var(--border);background:var(--bg2);overflow-y:auto;flex-shrink:0}
.content{flex:1;overflow-y:auto;background:var(--bg)}

.logo{display:flex;align-items:center;gap:10px}
.logo-dot{width:8px;height:8px;border-radius:50%;background:var(--gold)}
.logo h1{font:600 17px var(--serif);color:var(--text);letter-spacing:-0.3px}
.nav{display:flex;gap:6px}
.nav-btn{padding:6px 14px;border-radius:6px;border:1px solid var(--border2);background:var(--bg2);color:var(--text3);font-size:12px;font-weight:500;display:flex;align-items:center;gap:5px}
.nav-btn:hover{border-color:var(--gold);color:var(--gold)}
.nav-btn.active{background:var(--text);color:#fff;border-color:var(--text)}

.search-row{display:flex;gap:8px;margin-bottom:10px}
.search-wrap{flex:1;display:flex;align-items:center;gap:8px;padding:0 14px;border-radius:8px;background:var(--bg);border:1px solid var(--border2)}
.search-wrap:focus-within{border-color:var(--gold)}
.search-wrap input{flex:1;padding:10px 0;background:none;border:none;color:var(--text);font-size:13.5px;outline:none}
.search-wrap svg{color:var(--text4);flex-shrink:0}
.search-btn{padding:10px 20px;border-radius:8px;background:var(--text);color:#fff;border:none;font-size:12px;font-weight:600}
.search-btn:disabled{background:#ccc}
.filters-row{display:flex;gap:6px;align-items:center;flex-wrap:wrap;min-height:28px}
.filter-chip{padding:5px 11px;border-radius:6px;border:1px solid var(--border2);background:var(--bg2);color:var(--text3);font-size:11.5px;cursor:pointer;display:flex;align-items:center;gap:4px}
.filter-chip:hover{border-color:var(--gold);color:var(--gold)}
.filter-chip.active{background:var(--gold-light);border-color:var(--gold);color:var(--gold)}
.filter-label{font-size:10px;color:var(--text4);text-transform:uppercase;letter-spacing:1px}

.sidebar-header{padding:12px 16px;font-size:10px;text-transform:uppercase;letter-spacing:1.5px;color:var(--text4);border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
.deal-item{padding:10px 16px;border-bottom:1px solid #F0EEEA;cursor:pointer;display:flex;align-items:flex-start;gap:10px;transition:background 0.1s}
.deal-item:hover{background:var(--bg)}
.deal-item.selected{background:var(--gold-light);border-left:3px solid var(--gold)}
.deal-check{width:16px;height:16px;border:1.5px solid #ccc;border-radius:3px;flex-shrink:0;margin-top:2px;display:flex;align-items:center;justify-content:center;font-size:10px;color:#fff;transition:all 0.1s}
.deal-check.checked{background:var(--gold);border-color:var(--gold)}
.deal-info{flex:1;min-width:0}
.deal-name{font:600 12.5px var(--serif);color:var(--text);line-height:1.3}
.deal-meta{font-size:10.5px;color:var(--text3);margin-top:1px}

.prov-item{padding:10px 16px;border-bottom:1px solid #F0EEEA;cursor:pointer}
.prov-item:hover{background:var(--bg)}
.prov-item.selected{background:var(--gold-light);border-left:3px solid var(--gold)}
.prov-type{font-size:10px;text-transform:uppercase;letter-spacing:1px;color:var(--gold);font-weight:600;margin-bottom:2px}
.prov-title{font:600 12px var(--serif);color:var(--text);margin-bottom:2px}
.prov-deal{font-size:11px;color:var(--text3)}

.content-header{padding:20px 28px;border-bottom:1px solid var(--border);background:var(--bg2)}
.provision-type-label{font-size:10px;text-transform:uppercase;letter-spacing:1.5px;color:var(--gold);margin-bottom:4px;font-weight:600}
.content-title{font:700 22px var(--serif);color:var(--text);margin-bottom:6px;line-height:1.2}
.content-subtitle{font-size:13px;color:var(--text3);line-height:1.5}
.view-tabs{display:flex;gap:0;margin-top:14px;border-bottom:1px solid var(--border)}
.view-tab{padding:8px 16px;font-size:12px;color:var(--text3);cursor:pointer;border-bottom:2px solid transparent;margin-bottom:-1px}
.view-tab:hover{color:var(--text)}
.view-tab.active{color:var(--text);border-bottom-color:var(--gold)}
.action-row{display:flex;gap:8px;margin-top:14px;flex-wrap:wrap}
.action-btn{display:flex;align-items:center;gap:5px;padding:7px 14px;border-radius:6px;border:1px solid var(--border2);background:var(--bg2);color:var(--text2);font-size:12px}
.action-btn:hover{border-color:var(--gold);color:var(--gold)}
.action-btn.primary{background:var(--text);color:#fff;border-color:var(--text)}
.action-btn.primary:hover{background:#333}
.action-btn.compare{background:var(--gold);color:#fff;border-color:var(--gold)}
.action-btn.compare:hover{background:#a17e52}

.prongs-section{padding:20px 28px}
.prong-card{margin-bottom:16px;border:1px solid var(--border);border-radius:10px;overflow:hidden;background:var(--bg2)}
.prong-header{padding:10px 16px;background:var(--bg3);border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:6px}
.prong-name{font:600 13px var(--serif);color:var(--text)}
.prong-tag{font-size:10px;padding:2px 8px;border-radius:4px;font-weight:500}
.prong-tag.all{background:var(--green-bg);color:var(--green)}
.prong-tag.varies{background:var(--yellow-bg);color:var(--yellow)}
.prong-tag.missing{background:var(--red-bg);color:var(--red)}
.admin-edit{font-size:11px;color:var(--gold);cursor:pointer;opacity:0.5;background:none;border:none}
.admin-edit:hover{opacity:1;text-decoration:underline}
.ann-add-btn{font-size:9px;padding:1px 6px;border-radius:3px;border:1px solid var(--blue);background:#EBF2FB;color:var(--blue);cursor:pointer;font-weight:600;font-family:var(--sans);white-space:nowrap}
.ann-add-btn:hover{background:var(--blue);color:#fff}
.prong-body{display:grid}
.prong-cell{padding:12px 16px;border-right:1px solid #F0EEEA}
.prong-cell:last-child{border-right:none}
.prong-deal-label{font-size:9px;text-transform:uppercase;letter-spacing:1px;color:var(--gold);margin-bottom:5px;font-weight:600}
.prong-text{font:400 12px/1.65 var(--serif);color:var(--text2)}
.prong-text .hl{background:#FFF9C4;padding:0 2px;border-radius:2px}
.prong-text .absent{color:var(--text5);font-style:italic}

.fav-badge{display:inline-flex;align-items:center;gap:3px;padding:2px 7px;border-radius:3px;font-size:9px;font-weight:600;letter-spacing:0.3px;cursor:pointer;user-select:none;white-space:nowrap}
.fav-badge.strong-buyer{background:#E3F2FD;color:#1565C0}
.fav-badge.mod-buyer{background:#E8F0FE;color:#4285f4}
.fav-badge.neutral{background:#F5F5F5;color:#757575}
.fav-badge.mod-seller{background:#FFF3E0;color:#E65100}
.fav-badge.strong-seller{background:#FFEBEE;color:#C62828}
.fav-badge.unrated{background:var(--bg);color:var(--text5);border:1px dashed var(--border2)}

.ann-phrase{text-decoration:underline;text-decoration-thickness:2px;text-underline-offset:3px;cursor:pointer;text-decoration-color:#757575}
.ann-phrase.strong-buyer{text-decoration-color:#1565C0}
.ann-phrase.mod-buyer{text-decoration-color:#4285f4}
.ann-phrase.neutral{text-decoration-color:#757575}
.ann-phrase.mod-seller{text-decoration-color:#E65100}
.ann-phrase.strong-seller{text-decoration-color:#C62828}

.ann-popover{position:fixed;z-index:1200;background:var(--bg2);border:1px solid var(--border);border-radius:10px;box-shadow:0 12px 36px rgba(0,0,0,0.15);width:320px;max-height:420px;overflow-y:auto;padding:14px;font-size:12px}
.ann-popover .ann-phrase-quote{font:italic 12px/1.5 var(--serif);color:var(--text2);padding:8px 10px;background:var(--bg);border-left:3px solid var(--gold);border-radius:0 6px 6px 0;margin-bottom:10px}
.ann-popover .ann-fav-row{display:flex;align-items:center;gap:6px;margin-bottom:8px}
.ann-popover .ann-fav-dot{width:8px;height:8px;border-radius:50%}
.ann-popover .ann-fav-label{font-weight:600;font-size:11px}
.ann-popover .ann-tags{display:flex;gap:4px;margin-bottom:8px}
.ann-popover .ann-tag{padding:2px 6px;border-radius:3px;font-size:9px;font-weight:600;letter-spacing:0.3px}
.ann-popover .ann-tag.ai{background:#E3F2FD;color:#1565C0}
.ann-popover .ann-tag.verified{background:var(--green-bg);color:var(--green)}
.ann-popover .ann-tag.admin{background:var(--yellow-bg);color:var(--yellow)}
.ann-popover .ann-note{font-size:11.5px;color:var(--text2);line-height:1.5;margin-bottom:10px}
.ann-popover .ann-meta{font-size:10px;color:var(--text4);margin-bottom:10px}
.ann-popover .ann-edit-form{border-top:1px solid var(--border);padding-top:10px;margin-top:8px}
.ann-popover .ann-edit-form label{display:block;font-size:10px;text-transform:uppercase;letter-spacing:0.5px;color:var(--text3);margin-bottom:3px;margin-top:8px}
.ann-popover .ann-edit-form select,.ann-popover .ann-edit-form textarea{width:100%;padding:6px 8px;border:1px solid var(--border);border-radius:5px;font-size:11px;font-family:var(--sans);background:var(--bg);outline:none}
.ann-popover .ann-edit-form select:focus,.ann-popover .ann-edit-form textarea:focus{border-color:var(--gold)}
.ann-popover .ann-edit-form textarea{font-family:var(--serif);min-height:50px;resize:vertical}
.ann-popover .ann-save-btn{margin-top:8px;padding:5px 12px;border-radius:5px;background:var(--gold);color:#fff;border:none;font-size:11px;font-weight:600;cursor:pointer}
.ann-popover .ann-save-btn:hover{background:#a17e52}

.prong-analysis{padding:10px 16px;background:#FAFAF8;border-top:1px solid var(--border);font-size:12px;line-height:1.6;color:var(--text2);animation:fadeIn 0.3s}
.prong-analysis strong{color:var(--text)}

.coverage-bar{height:4px;border-radius:2px;background:var(--border);overflow:hidden;margin-top:6px}
.coverage-fill{height:100%;border-radius:2px;transition:width 0.3s}
.coverage-fill.full{background:var(--green)}
.coverage-fill.partial{background:var(--yellow)}
.coverage-fill.low{background:var(--red)}

.admin-banner{margin:16px 28px;padding:10px 16px;background:var(--yellow-bg);border:1px solid #FFE082;border-radius:8px;display:flex;align-items:center;justify-content:space-between;font-size:12px;color:var(--yellow);flex-wrap:wrap;gap:8px}
.admin-banner button{padding:4px 10px;border-radius:5px;border:1px solid #FFB300;background:#fff;color:var(--yellow);font-size:11px;cursor:pointer}

.full-text-label{font-size:10px;text-transform:uppercase;letter-spacing:1.5px;color:var(--text4);margin-bottom:8px;display:flex;justify-content:space-between;align-items:center}
.full-text{font:400 13px/1.8 var(--serif);color:var(--text2);padding:16px;background:var(--bg);border-radius:8px;border:1px solid var(--border);white-space:pre-wrap}
.full-text .coded{border-bottom:2px solid var(--gold);cursor:pointer}
.full-text .coded:hover{background:var(--gold-light)}

.ask-panel{display:none;flex-direction:column;width:380px;border-left:1px solid var(--border);background:var(--bg2);flex-shrink:0}
.ask-panel.open{display:flex}
.ask-header{padding:10px 16px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
.ask-messages{flex:1;overflow-y:auto;padding:14px}
.ask-msg{margin-bottom:12px;animation:fadeIn 0.2s}
.ask-msg.user{text-align:right}
.ask-msg.user .bubble{background:var(--bg);border:1px solid var(--border);display:inline-block;text-align:left}
.ask-msg.assistant .bubble{background:var(--bg3);border:1px solid var(--border)}
.bubble{padding:10px 14px;border-radius:8px;font-size:12.5px;line-height:1.6;max-width:95%}
.ask-input-row{padding:10px 14px;border-top:1px solid var(--border);display:flex;gap:8px}
.ask-input-row textarea{flex:1;padding:8px 12px;border-radius:8px;background:var(--bg);border:1px solid var(--border);color:var(--text);font-size:12.5px;resize:none;outline:none;min-height:36px;max-height:100px}
.ask-input-row textarea:focus{border-color:var(--gold)}
.ask-send{padding:0 14px;border-radius:8px;background:var(--text);color:#fff;border:none;font-weight:600;font-size:11px}
.ask-send:disabled{background:#ccc}

.modal-bg{position:fixed;inset:0;background:rgba(0,0,0,0.3);z-index:1000;display:flex;justify-content:center;align-items:center;backdrop-filter:blur(2px)}
.modal{width:90%;max-width:750px;max-height:85vh;background:var(--bg2);border-radius:12px;border:1px solid var(--border);overflow:hidden;display:flex;flex-direction:column;box-shadow:0 16px 48px rgba(0,0,0,0.15)}
.modal-header{padding:14px 20px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
.modal-body{flex:1;overflow-y:auto;padding:20px}
.close-btn{background:none;border:none;color:var(--text3);cursor:pointer;font-size:18px}

.recode-modal .modal{max-width:550px}
.recode-field{margin-bottom:14px}
.recode-field label{display:block;font-size:11px;text-transform:uppercase;letter-spacing:1px;color:var(--text3);margin-bottom:4px}
.recode-field select,.recode-field textarea,.recode-field input[type="text"]{width:100%;padding:8px 12px;border:1px solid var(--border);border-radius:6px;font-size:13px;font-family:var(--sans);background:var(--bg);outline:none}
.recode-field textarea{font-family:var(--serif);min-height:100px;line-height:1.6}
.recode-field select:focus,.recode-field textarea:focus,.recode-field input:focus{border-color:var(--gold)}
.save-btn{padding:8px 20px;border-radius:6px;background:var(--gold);color:#fff;border:none;font-size:13px;font-weight:600}
.save-btn:hover{background:#a17e52}

.report-table{width:100%;border-collapse:separate;border-spacing:0;border:1px solid var(--border);border-radius:10px;overflow:hidden;background:var(--bg2);margin-bottom:20px;table-layout:fixed}
.report-table th{padding:10px 14px;font:600 9px var(--sans);text-transform:uppercase;letter-spacing:1px;color:var(--gold);background:var(--bg3);border-bottom:1px solid var(--border);text-align:left;border-right:1px solid var(--border);word-wrap:break-word;overflow-wrap:break-word}
.report-table th:last-child{border-right:none}
.report-table td{padding:10px 14px;font:400 11.5px/1.6 var(--serif);color:var(--text2);border-bottom:1px solid #F0EEEA;border-right:1px solid #F0EEEA;vertical-align:top;word-wrap:break-word;overflow-wrap:break-word}
.report-table td:last-child{border-right:none}
.report-table tr:last-child td{border-bottom:none}
.report-table td.sub-prov-label{font:600 11.5px var(--sans);color:var(--text);background:var(--bg3);white-space:nowrap}
.report-table colgroup col:first-child{width:150px}

.fav-dropdown{position:fixed;z-index:1100;background:var(--bg2);border:1px solid var(--border);border-radius:8px;box-shadow:0 8px 24px rgba(0,0,0,0.12);padding:4px;min-width:160px}
.fav-option{padding:6px 10px;font-size:11px;border-radius:4px;cursor:pointer;display:flex;align-items:center;gap:6px}
.fav-option:hover{background:var(--bg)}
.fav-dot{width:8px;height:8px;border-radius:50%}

.redline-textarea{width:100%;min-height:140px;padding:14px;border-radius:8px;background:var(--bg);border:1px solid var(--border);color:var(--text2);font:400 13px/1.7 var(--serif);resize:vertical;outline:none}
.redline-textarea:focus{border-color:var(--gold)}
.risk-badge{display:inline-flex;align-items:center;gap:4px;padding:3px 8px;border-radius:4px;font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:0.5px}
.risk-badge.low{background:var(--green-bg);color:var(--green)}.risk-badge.medium{background:var(--yellow-bg);color:var(--yellow)}.risk-badge.high{background:var(--red-bg);color:var(--red)}
.diff-card{padding:14px;border-radius:8px;background:var(--bg);border:1px solid var(--border);margin-bottom:10px}
.diff-cols{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin:8px 0}
.diff-col label{font-size:9px;text-transform:uppercase;letter-spacing:1px;color:var(--text4);display:block;margin-bottom:2px}
.diff-col p{font:italic 12px/1.5 var(--serif);color:var(--text3)}
.diff-rec{font-size:12px;color:var(--gold);padding:7px 10px;border-radius:5px;background:var(--gold-light);border-left:3px solid var(--gold);margin-top:8px;line-height:1.5}

.empty{padding:60px 20px;text-align:center;color:var(--text4)}
.empty h3{font:600 16px var(--serif);color:var(--text3);margin-bottom:4px}
.loading{display:flex;align-items:center;gap:8px;color:var(--text3);padding:30px;justify-content:center;font-size:13px}

.provision-section-divider{padding:14px 0 6px;font-size:10px;text-transform:uppercase;letter-spacing:1.5px;color:var(--gold);font-weight:700;border-bottom:2px solid var(--gold-border);margin-bottom:12px;display:flex;justify-content:space-between;align-items:center}
.provision-section-divider .coverage-info{font-size:10px;color:var(--text3);text-transform:none;letter-spacing:0;font-weight:400}

.sidebar-toggle{cursor:pointer;font-size:9px;display:inline-block;margin-right:4px;color:var(--text4);transition:color 0.15s}
.sidebar-toggle:hover{color:var(--gold)}
.sidebar-cat-item{padding:5px 16px 5px 40px;font-size:11px;color:var(--gold);font-weight:600;cursor:pointer;border-bottom:1px solid #F0EEEA;display:flex;align-items:center;gap:6px;transition:all 0.15s}
.sidebar-cat-item:hover{background:var(--gold-light)}
.sidebar-cat-dot{width:5px;height:5px;border-radius:50%;background:var(--gold);flex-shrink:0}
.sidebar-cat-item.hidden-cat{color:var(--text4);font-weight:400;opacity:0.6;text-decoration:line-through}
.sidebar-cat-item.hidden-cat .sidebar-cat-dot{background:var(--text5)}
.sidebar-cat-item.hidden-cat:hover{background:var(--bg);opacity:0.8}

.text-selector-text{font:400 12px/1.7 var(--serif);color:var(--text2);padding:12px;background:var(--bg);border:1px solid var(--border);border-radius:6px;max-height:200px;overflow-y:auto;user-select:text;cursor:text;white-space:pre-wrap}
.text-selection-highlight{background:rgba(184,149,106,0.3);text-decoration:underline;text-decoration-color:var(--gold);text-underline-offset:2px}

.recode-widget{padding:4px 0}
.recode-context-text{font:400 11.5px/1.7 var(--serif);color:var(--text2);padding:10px 12px;background:var(--bg);border:1px solid var(--border);border-radius:6px;max-height:220px;overflow-y:auto;white-space:pre-wrap;user-select:text}
.recode-ctx{color:var(--text4)}
.recode-sel{background:rgba(184,149,106,0.25);color:var(--text);border-bottom:2px solid var(--gold);padding:0 1px}
.recode-ellipsis{color:var(--text5);font-style:italic}
.recode-sliders{padding:6px 0 2px;display:flex;flex-direction:column;gap:2px}
.recode-slider-row{display:flex;align-items:center;gap:8px}
.recode-slider-row label{font:600 9px var(--sans);text-transform:uppercase;letter-spacing:0.5px;color:var(--text4);width:32px;flex-shrink:0}
.recode-range{flex:1;height:4px;-webkit-appearance:none;appearance:none;background:var(--border);border-radius:2px;outline:none;cursor:pointer}
.recode-range::-webkit-slider-thumb{-webkit-appearance:none;width:14px;height:14px;border-radius:50%;background:var(--gold);border:2px solid #fff;box-shadow:0 1px 4px rgba(0,0,0,0.2);cursor:grab}
.recode-range::-moz-range-thumb{width:14px;height:14px;border-radius:50%;background:var(--gold);border:2px solid #fff;box-shadow:0 1px 4px rgba(0,0,0,0.2);cursor:grab}
.recode-range:active::-webkit-slider-thumb{cursor:grabbing;background:#a17e52}
.recode-cat-select{padding:4px 8px;border:1px solid var(--border);border-radius:5px;font:500 11px var(--sans);color:var(--text);background:var(--bg);outline:none;max-width:180px}
.recode-cat-select:focus{border-color:var(--gold)}

.dollar-pct{display:inline;margin-left:2px;font:600 9px var(--sans);color:var(--blue);cursor:default;letter-spacing:0.2px}
.dollar-pct:hover{text-decoration:underline}

.prong-sub-row{display:grid;border-top:1px dashed var(--border);background:#F8FAFD}
.prong-sub-label{grid-column:1/-1;padding:4px 16px;font:600 10px var(--sans);text-transform:uppercase;letter-spacing:0.5px;color:var(--blue);background:#EBF2FB;border-left:3px solid var(--blue)}
.prong-sub-cell{padding:8px 16px;border-right:1px solid #F0EEEA;font:400 11px/1.55 var(--serif);color:var(--text3)}
.prong-sub-cell:last-child{border-right:none}
